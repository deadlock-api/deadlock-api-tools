[package]
name = "common"
version = "0.1.0"
edition = "2024"

[dependencies]
base64 = { version = "0.22.1", optional = true }
once_cell = { version = "1.21.3", optional = true }
reqwest = { version = "0.12.15", features = ["json"] }
serde = { version = "1.0.219", features = ["derive"] }
serde_json = { version = "1.0.140", optional = true }
valveprotos = { git = "https://github.com/deadlock-api/valveprotos-rs.git", rev = "837747825a529673e97b681ee0f70b82d13eb0eb", features = ["gc-client", "serde"], optional = true }
prost = { version = "0.13.5", optional = true }
metrics = "0.24.2"
tracing = "0.1.41"
clickhouse = {version= "0.13.2" , optional = true}
object_store = { version = "0.12.1", features = ["aws"], optional = true }
anyhow = "1.0.98"
sqlx = { version = "0.8.6", features = ["macros", "postgres", "runtime-tokio", "time"], optional = true }
fred = { version = "10.1.0", features = ["i-hexpire"], optional = true }
metrics-exporter-prometheus = "0.17"
tracing-subscriber = { version = "0.3.19", features = ["env-filter"] }

[features]
default = []
redis = ["dep:fred"]
clickhouse = ["dep:clickhouse"]
object-store = ["dep:object_store"]
postgres = ["dep:sqlx"]
steam-proxy = ["dep:valveprotos", "dep:prost", "dep:serde_json", "dep:once_cell", "dep:base64"]
